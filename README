Timezone Converter
==================

Display time converted from one timezone to another timezone.

Input either:
    timezone			Local machine's localtime is converted to that timezone; or
    timezone time timezone	The time in the first timezone is converted to the second timezone; or
    regex			Timezones are searched using the regex (which can be a simple string).	

Input Format:
    timezone in the format of the /usr/share/zoneinfo directory structure (e.g.
	Australia/Sydney, Europe/Rome, Zulu, Israel), or a regex.  If the regex
	matches only one timezone from the internal list, that timezone is
	susbstituted automatically on the basis that the user should not have to retype
	it again.  The return value can be used to detect if this substitution has
	occurred.
	The timezone is case-sensitive, but the regex search is case-insensitive.  This lets
	you do quick data entry of "paris" since the regex will substitute the correct value of
	Europe/Paris.
    time in either of two strftime formats (which can be changed in #define in the source code):
	"%Y-%m-%d %H:%M" or %Y%m%d%H%M (the second for quick and dirty typing without legibility).

Output:
    a formatted string of the time; or
    a list of possible candidate timezones.

Return value:
    0	timezones match exactly (perfect match) with the internal list; no errors
    1	at least one of the timezones was substituted because there was only one 
	match in the internal list (i.e. imperfect match); no errors
    2	an error occurred: too many timezone candidates to automatically choose one, time format wrong, regex invalid.

Usage:
    tz Europe/Rome
    tz "Europe/Paris" "2004-10-30 06:30" "America/New_York"
    tz Australia/Sydney 201105061928 America/New_York

Examples:
    Normal:
	$ tz Europe/Rome
	    Thu, 12 May 2011 06:57:09 +0200 (CEST)
	$ tz "Europe/Paris" "2004-10-30 06:30" "America/New_York"
	    Sat, 30 Oct 2004 00:30:00 -0400 (EDT)
	$ tz Australia/Sydney 201105061928 America/New_York
	    Fri, 06 May 2011 05:28:00 -0400 (EDT)
    Not found:
	$ tz paris
	    "paris" timezone not found.  Possible candidates:
	    Europe/Paris is the only candidate, so using it.
	    Fri, 13 May 2011 05:46:01 +0200 (CEST)
	$ tz par
	    "par" timezone not found.  Possible candidates:
	    America/Paramaribo
	    Europe/Paris
    Using a regex:
	$ tz "s(ain)?t_"
	    "s(ain)?t_" timezone not found.  Possible candidates:
	    America/St_Barthelemy
	    America/St_Johns
	    America/St_Kitts
	    America/St_Lucia
	    America/St_Thomas
	    America/St_Vincent
	    Atlantic/St_Helena

Compilation:
    cc tz.c -Wall -O2  -o tz

    The timezone.h file is almost certainly correct for a unix-like
    system, including Linux.  If you have to generate the entries in
    timzone.h for your machine, run `find /usr/share/zoneinfo -type f -ls
    | cut -d '/'  -f 5-9` and edit the output or use sed to add leading "
    char and trailing ", chars.   The posix and right directory entries
    can be deleted, along with zone.tab.  You will need to regenerate (or
    manually add) the entries if a new timezone is created in the world
    and your /usr/share/timezone entries change.  I imagine this would be
    a very rare event.

Remarks:
      Concept based on http://stackoverflow.com/questions/2413418/how-to-programatically-convert-a-time-from-one-timezone-to-another-in-c

Licence:
	MIT-style licence (see source file for particulars).  Copyright 2011 Nick Coleman 

